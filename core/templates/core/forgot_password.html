{% extends 'core/base.html' %}
{% load static %}
{% block title %}找回密码 - 班级网站{% endblock %}

{% block navbar %}{% endblock %}
{% block content %}
<div class="login-container">
  <div class="login-header">
    <h2>找回您的密码</h2>
    <p class="text-muted">请输入您的注册邮箱地址</p>
  </div>

  {% if messages %}
  <div class="alert alert-info">
    {% for message in messages %}
      <p class="mb-0">{{ message }}</p>
    {% endfor %}
  </div>
  {% endif %}

  <form method="post" class="login-form">
    {% csrf_token %}

    <div class="form-group">
      <label for="email" class="form-label">邮箱地址</label>
      <input type="email" name="email" id="email" class="form-control" required autofocus>
    </div>

    <button type="submit" class="btn btn-login btn-primary w-100">发送重置链接</button>

    <div class="mt-3">
      {% if form.non_field_errors %}
        <div class="alert alert-danger">
          {% for error in form.non_field_errors %}
            <p class="mb-0">{{ error }}</p>
          {% endfor %}
        </div>
      {% endif %}
    </div>
  </form>

  <div class="login-footer">
    <p class="mb-1">返回<a href="{% url 'login' %}">登录页面</a></p>
    <p>没有账号？<a href="{% url 'register' %}">立即注册</a></p>
  </div>
</div>
{% endblock %}

{% block extra_css %}
<style>
  body {
    background-color: #f5f7fb;
    background-image: linear-gradient(120deg, #e0f7fa 0%, #f3e5f5 100%);
    min-height: 100vh;
    display: flex;
    flex-direction: column;
  }

  .container {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .login-container {
    width: 100%;
    max-width: 450px;
  }

  footer {
    background-color: transparent !important;
    position: relative;
    z-index: 2;
  }

  /* 确保标签对齐 */
  .form-group label.form-label {
    display: block;
    margin-bottom: 0.5rem;
    font-weight: 500;
  }

  .alert {
    border-radius: 8px;
    padding: 12px 16px;
  }
</style>
<link rel="stylesheet" href="{% static 'css/auth.css' %}">
{% endblock %}